<!DOCTYPE html>
<html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<head>
	<link rel="stylesheet" href="CSS/mainStyle.css">
</head>
<body>
	<div class="center-block">
		<div class="img-title">
			<center><img src="/Images/HorLogo.png" class="img-responsive" alt="Responsive image"></img></center>
		</div>
	</div>
	<div class="center-block">
		<div class="ep-list" id="AllEps"></div>
		
		<script>
			var xhttp;
			xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
    				if (this.readyState == 4 && this.status == 200) {
        				getRatings(this);
   				}
			};
			xhttp.open("GET", "/Episodes/episodes.xml", true);
			xhttp.send();
			
			function getRatings(xml) {
			    var xmlDoc = xml.responseXML;
			    var x = xmlDoc.getElementsByTagName("title");
			    var ig = xmlDoc.getElementsByTagName("IGscore");
			    var imgSrc = xmlDoc.getElementsByTagName("src");
			    var href = xmlDoc.getElementsByTagName("href");
			    for (var i = 0; i < x.length; i++) {
				var ep = document.createElement("div");
				var node = document.createElement("h2");
				var igNode = document.createElement("h3");
				var imgNode = document.createElement("img");
				var aNode = document.createElement("a");
				    
				var linkNode = href[i].childNodes[0].textContent;
				var txtNode = x[i].childNodes[0];
				var igTxtNode = ig[i].childNodes[0];
				var imgSrcTxt = imgSrc[i].childNodes[0].textContent;
				    
				imgNode.setAttribute("src",imgSrcTxt);
				imgNode.setAttribute("class","img-responsive");
				imgNode.setAttribute("alt","Responsive image");
				aNode.setAttribute("href",linkNode);
				    
				igNode.appendChild(igTxtNode);
				igNode.childNodes[0].textContent = "IG Score: " + igTxtNode.textContent;
				node.appendChild(txtNode);
				aNode.appendChild(imgNode);
				ep.appendChild(node);
				ep.appendChild(aNode);
				ep.appendChild(igNode);
				document.getElementById("AllEps").appendChild(ep);
			    }
			}
		</script>
	</div>
</body>	
</html>
